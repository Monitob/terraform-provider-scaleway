---
version: 1
interactions:
- request:
    body: '{"name":"test-acc-scaleway-project-523143170655028928","organization_id":"ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b","description":""}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.20.1; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/account/v3/projects
    method: POST
  response:
    body: '{"created_at":"2023-07-19T13:34:41.141289Z","description":"","id":"997550cd-0f71-43be-937a-fead6c992e60","name":"test-acc-scaleway-project-523143170655028928","organization_id":"ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b","updated_at":"2023-07-19T13:34:41.141289Z"}'
    headers:
      Content-Length:
      - "259"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 19 Jul 2023 13:34:41 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - b0b716c9-fd6e-4c05-91c8-2911ed975d14
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"name":"test-acc-scaleway-iam-app-2322429849688144197","organization_id":"ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b","description":""}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.20.1; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/applications
    method: POST
  response:
    body: '{"created_at":"2023-07-19T13:34:41.433066Z","description":"","editable":true,"id":"bacd1f61-41f6-4981-8213-fb3c36f9a4c1","name":"test-acc-scaleway-iam-app-2322429849688144197","nb_api_keys":0,"organization_id":"ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b","updated_at":"2023-07-19T13:34:41.433066Z"}'
    headers:
      Content-Length:
      - "292"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 19 Jul 2023 13:34:41 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 5c7ff9be-7fd6-4b5a-8f08-384c467a7434
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"name":"test-acc-scaleway-iam-policy-8200764137357487311","description":"","organization_id":"ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b","rules":[{"permission_set_names":["ObjectStorageReadOnly","ObjectStorageObjectsRead","ObjectStorageBucketsRead"],"project_ids":["997550cd-0f71-43be-937a-fead6c992e60"]}],"application_id":"bacd1f61-41f6-4981-8213-fb3c36f9a4c1"}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.20.1; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies
    method: POST
  response:
    body: '{"application_id":"bacd1f61-41f6-4981-8213-fb3c36f9a4c1","created_at":"2023-07-19T13:34:41.725934Z","description":"","editable":true,"id":"0a9fb9e1-5909-4c36-9866-a303de735348","name":"test-acc-scaleway-iam-policy-8200764137357487311","nb_permission_sets":0,"nb_rules":0,"nb_scopes":0,"organization_id":"ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b","updated_at":"2023-07-19T13:34:41.725934Z"}'
    headers:
      Content-Length:
      - "385"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 19 Jul 2023 13:34:41 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 3cdb153a-3557-4f74-a15b-96ef8236186f
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"application_id":"bacd1f61-41f6-4981-8213-fb3c36f9a4c1","expires_at":null,"default_project_id":"997550cd-0f71-43be-937a-fead6c992e60","description":""}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.20.1; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/api-keys
    method: POST
  response:
    body: '{"access_key":"SCW8H186S4GTM507KMSJ","application_id":"bacd1f61-41f6-4981-8213-fb3c36f9a4c1","created_at":"2023-07-19T13:34:42.416069Z","creation_ip":"51.159.73.9","default_project_id":"997550cd-0f71-43be-937a-fead6c992e60","description":"","editable":true,"expires_at":null,"secret_key":"00000000-0000-0000-0000-000000000000","updated_at":"2023-07-19T13:34:42.416069Z"}'
    headers:
      Content-Length:
      - "370"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 19 Jul 2023 13:34:42 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - be76000f-e1d0-4fb5-8a1b-166e60ba83ab
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: <CreateBucketConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/"><LocationConstraint>fr-par</LocationConstraint></CreateBucketConfiguration>
    form: {}
    headers:
      Content-Length:
      - "150"
      User-Agent:
      - aws-sdk-go/1.44.294 (go1.20.1; linux; amd64)
      X-Amz-Acl:
      - private
      X-Amz-Bucket-Object-Lock-Enabled:
      - "false"
      X-Amz-Content-Sha256:
      - 2cb57fad7b7168921a4c94426cfcb9ee2953f126430595df844e22d50f029060
      X-Amz-Date:
      - 20230719T133443Z
    url: https://test-acc-scaleway-object-bucket-1615227525591000985.s3.fr-par.scw.cloud/
    method: PUT
  response:
    body: ""
    headers:
      Content-Length:
      - "0"
      Content-Type:
      - text/html; charset=UTF-8
      Date:
      - Wed, 19 Jul 2023 13:34:44 GMT
      Location:
      - /test-acc-scaleway-object-bucket-1615227525591000985
      X-Amz-Id-2:
      - txef97549560b042aeb7dc2-0064b7e673
      X-Amz-Request-Id:
      - txef97549560b042aeb7dc2-0064b7e673
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Content-Md5:
      - 1B2M2Y8AsgTpgAmY7PhCfg==
      User-Agent:
      - aws-sdk-go/1.44.294 (go1.20.1; linux; amd64)
      X-Amz-Acl:
      - private
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230719T133444Z
    url: https://test-acc-scaleway-object-bucket-1615227525591000985.s3.fr-par.scw.cloud/?acl=
    method: PUT
  response:
    body: ""
    headers:
      Content-Length:
      - "0"
      Content-Type:
      - text/html; charset=UTF-8
      Date:
      - Wed, 19 Jul 2023 13:34:45 GMT
      X-Amz-Id-2:
      - tx4941ffdde5bb46578a2e8-0064b7e674
      X-Amz-Request-Id:
      - tx4941ffdde5bb46578a2e8-0064b7e674
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.294 (go1.20.1; linux; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230719T133445Z
    url: https://test-acc-scaleway-object-bucket-1615227525591000985.s3.fr-par.scw.cloud/?acl=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <AccessControlPolicy xmlns="http://s3.amazonaws.com/doc/2006-03-01/"><Owner><ID>ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b:ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b</ID><DisplayName>ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b:ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b</DisplayName></Owner><AccessControlList><Grant><Grantee xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CanonicalUser"><ID>ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b:ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b</ID><DisplayName>ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b:ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b</DisplayName></Grantee><Permission>FULL_CONTROL</Permission></Grant></AccessControlList></AccessControlPolicy>
    headers:
      Content-Length:
      - "698"
      Content-Type:
      - text/html; charset=UTF-8
      Date:
      - Wed, 19 Jul 2023 13:34:45 GMT
      X-Amz-Id-2:
      - tx8d5da22df6d943398cd44-0064b7e675
      X-Amz-Request-Id:
      - tx8d5da22df6d943398cd44-0064b7e675
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.294 (go1.20.1; linux; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230719T133445Z
    url: https://test-acc-scaleway-object-bucket-1615227525591000985.s3.fr-par.scw.cloud/?object-lock=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <Error><Code>ObjectLockConfigurationNotFoundError</Code><Message>Object Lock configuration does not exist for this bucket</Message><RequestId>tx1afe5b6f7fae4981a0dc1-0064b7e675</RequestId></Error>
    headers:
      Content-Type:
      - application/xml
      Date:
      - Wed, 19 Jul 2023 13:34:45 GMT
      X-Amz-Id-2:
      - tx1afe5b6f7fae4981a0dc1-0064b7e675
      X-Amz-Request-Id:
      - tx1afe5b6f7fae4981a0dc1-0064b7e675
    status: 404 Not Found
    code: 404
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.294 (go1.20.1; linux; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230719T133445Z
    url: https://test-acc-scaleway-object-bucket-1615227525591000985.s3.fr-par.scw.cloud/
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <ListBucketResult xmlns="http://s3.amazonaws.com/doc/2006-03-01/"><Name>test-acc-scaleway-object-bucket-1615227525591000985</Name><Prefix/><Delimiter/><MaxKeys>1000</MaxKeys><IsTruncated>false</IsTruncated><Marker/></ListBucketResult>
    headers:
      Content-Length:
      - "273"
      Content-Type:
      - application/xml
      Date:
      - Wed, 19 Jul 2023 13:34:46 GMT
      X-Amz-Id-2:
      - tx8df6d4a5cba64ade9019a-0064b7e675
      X-Amz-Request-Id:
      - tx8df6d4a5cba64ade9019a-0064b7e675
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.294 (go1.20.1; linux; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230719T133446Z
    url: https://test-acc-scaleway-object-bucket-1615227525591000985.s3.fr-par.scw.cloud/?tagging=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <Error><Code>NoSuchTagSet</Code><Message>There is no tag set associated with the bucket or object.</Message><RequestId>txa083fb0e9160406f9bdde-0064b7e676</RequestId><Headers/></Error>
    headers:
      Content-Type:
      - application/xml
      Date:
      - Wed, 19 Jul 2023 13:34:46 GMT
      X-Amz-Id-2:
      - txa083fb0e9160406f9bdde-0064b7e676
      X-Amz-Request-Id:
      - txa083fb0e9160406f9bdde-0064b7e676
    status: 404 Not Found
    code: 404
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.294 (go1.20.1; linux; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230719T133446Z
    url: https://test-acc-scaleway-object-bucket-1615227525591000985.s3.fr-par.scw.cloud/?cors=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <Error><Code>NoSuchCORSConfiguration</Code><Message>The CORS configuration does not exist</Message><RequestId>tx6bf258b4d4b6495cb4a8e-0064b7e676</RequestId></Error>
    headers:
      Content-Type:
      - application/xml
      Date:
      - Wed, 19 Jul 2023 13:34:46 GMT
      X-Amz-Id-2:
      - tx6bf258b4d4b6495cb4a8e-0064b7e676
      X-Amz-Request-Id:
      - tx6bf258b4d4b6495cb4a8e-0064b7e676
    status: 404 Not Found
    code: 404
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.294 (go1.20.1; linux; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230719T133446Z
    url: https://test-acc-scaleway-object-bucket-1615227525591000985.s3.fr-par.scw.cloud/?versioning=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <VersioningConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/"/>
    headers:
      Content-Length:
      - "113"
      Content-Type:
      - text/plain
      Date:
      - Wed, 19 Jul 2023 13:34:46 GMT
      X-Amz-Id-2:
      - tx8cac169aa9a34befbe99a-0064b7e676
      X-Amz-Request-Id:
      - tx8cac169aa9a34befbe99a-0064b7e676
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.294 (go1.20.1; linux; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230719T133446Z
    url: https://test-acc-scaleway-object-bucket-1615227525591000985.s3.fr-par.scw.cloud/?lifecycle=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <Error><Code>NoSuchLifecycleConfiguration</Code><Message>The lifecycle configuration does not exist.</Message><RequestId>tx83dfe7e06ea94499ba0ed-0064b7e676</RequestId></Error>
    headers:
      Content-Type:
      - application/xml
      Date:
      - Wed, 19 Jul 2023 13:34:46 GMT
      X-Amz-Id-2:
      - tx83dfe7e06ea94499ba0ed-0064b7e676
      X-Amz-Request-Id:
      - tx83dfe7e06ea94499ba0ed-0064b7e676
    status: 404 Not Found
    code: 404
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.294 (go1.20.1; linux; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230719T133447Z
    url: https://test-acc-scaleway-object-bucket-1615227525591000985.s3.fr-par.scw.cloud/
    method: HEAD
  response:
    body: ""
    headers:
      Content-Length:
      - "0"
      Content-Type:
      - application/xml
      Date:
      - Wed, 19 Jul 2023 13:34:47 GMT
      X-Amz-Id-2:
      - txcdac02f1aa05453b904fa-0064b7e677
      X-Amz-Request-Id:
      - txcdac02f1aa05453b904fa-0064b7e677
    status: 403 Forbidden
    code: 403
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.294 (go1.20.1; linux; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230719T133448Z
    url: https://test-acc-scaleway-object-bucket-1615227525591000985.s3.fr-par.scw.cloud/
    method: DELETE
  response:
    body: ""
    headers:
      Content-Length:
      - "0"
      Content-Type:
      - text/html; charset=UTF-8
      Date:
      - Wed, 19 Jul 2023 13:34:48 GMT
      X-Amz-Id-2:
      - tx32a83e6af974428c8aa1d-0064b7e678
      X-Amz-Request-Id:
      - tx32a83e6af974428c8aa1d-0064b7e678
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.20.1; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/api-keys/SCW8H186S4GTM507KMSJ
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 19 Jul 2023 13:34:48 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 8e799f59-c9c0-40c8-9c87-563ac7d15cc5
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.20.1; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/0a9fb9e1-5909-4c36-9866-a303de735348
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 19 Jul 2023 13:34:48 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 94a2cbbc-6523-4786-b682-e939f53c7dc9
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.20.1; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/applications/bacd1f61-41f6-4981-8213-fb3c36f9a4c1
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 19 Jul 2023 13:34:49 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 99f423e9-4408-420a-afc4-333eeb4ab6d1
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.20.1; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/account/v3/projects/997550cd-0f71-43be-937a-fead6c992e60
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 19 Jul 2023 13:34:50 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 2f3b65d9-cdb1-4fbc-8000-b5dc09355fc7
    status: 204 No Content
    code: 204
    duration: ""
